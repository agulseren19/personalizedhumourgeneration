OpenAI client initialized
Anthropic client initialized
DeepSeek client available
FIXED COMPLETE HUMOR GENERATION SYSTEM DEMO
All major issues have been addressed:
• Content filtering with detoxify
• Proper persona recommendation based on user preferences
• Fixed feedback learning (likes/dislikes actually work)
• Meaningful evaluation scores (not all 5/10)
• Black card generation
• AWS knowledge base integration
• Group consensus humor

======================================================================
Initializing FIXED Complete Humor Generation System...
Fixed Issues:
  • Content filtering with detoxify
  • Proper persona recommendation
  • Fixed feedback learning (likes/dislikes)
  • Meaningful evaluation scores
  • Black card generation
  • AWS knowledge base integration

Available personas: ['dad_humor_enthusiast', 'millennial_memer', 'office_worker', 'gaming_guru', 'dark_humor_specialist', 'wordplay_master', 'suburban_parent', 'gen_z_chaos']

======================================================================
DEMONSTRATING FIXED COMPLETE WORKFLOW
======================================================================

CONTENT FILTERING DEMONSTRATION
--------------------------------------------------
  'A delightful family picnic'
    Safe: True, Toxicity: 0.001

  'My boss's terrible management skills'
    Safe: True, Toxicity: 0.059

  'Something hilariously inappropriate'
    Safe: True, Toxicity: 0.012

  'Damn politicians and their BS'
    Safe: False, Toxicity: 0.956
    Sanitized: 'Darn politicians and their BS'

  'You're such an idiot, moron'
    Safe: False, Toxicity: 0.988
    Sanitized: 'You're such an idiot, moron'


INITIAL HUMOR GENERATION
--------------------------------------------------

👤 Processing user: john_lawyer
  Persona recommendations for john_lawyer:
    dad_humor_enthusiast: 5.0
    millennial_memer: 5.0
    office_worker: 5.0
    gaming_guru: 5.0
    dark_humor_specialist: 5.0
  Generating with personas: ['corporate_ladder_climber', 'dark_humor_specialist', 'office_worker', 'dad_humor_enthusiast', 'suburban_parent']
  Final personas (with custom): ['corporate_ladder_climber', 'dark_humor_specialist', 'office_worker']
ERROR: Error with claude-3-sonnet: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
  Context: What's the best legal excuse for being late? _____
  Recommended personas: ['corporate_ladder_climber', 'dark_humor_specialist', 'office_worker', 'dad_humor_enthusiast', 'suburban_parent']
    1. "What's the best legal excuse for being late? Rearranging my sock drawer by color and texture to ensure optimal workplace energy flow."
       By: dark_humor_specialist (via gpt-3.5-turbo)
       Score: 6.0/10
       Toxicity: 0.001
       Safe: True
    2. "Traffic was backed up worse than our last team meeting agenda."
       By: office_worker (via gpt-3.5-turbo)
       Score: 6.0/10
       Toxicity: 0.001
       Safe: True
    3. "Overachieving on my side hustle as a LinkedIn influencer."
       By: corporate_ladder_climber (via gpt-4)
       Score: 5.9/10
       Toxicity: 0.001
       Safe: True

👤 Processing user: mary_parent
  Persona recommendations for mary_parent:
    dad_humor_enthusiast: 5.0
    millennial_memer: 5.0
    office_worker: 5.0
    gaming_guru: 5.0
    dark_humor_specialist: 5.0
  Generating with personas: ['dark_humor_specialist', 'office_worker', 'dad_humor_enthusiast', 'suburban_parent', 'millennial_memer']
  Final personas (with custom): ['dark_humor_specialist', 'office_worker', 'dad_humor_enthusiast']
ERROR: Error with claude-3-sonnet: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
  Context: What did I pack for my kid's lunch? _____
  Recommended personas: ['dark_humor_specialist', 'office_worker', 'dad_humor_enthusiast', 'suburban_parent', 'millennial_memer']
    1. "What did I pack for my kid's lunch? A sandwich, because it's 'wheely' good for them!"
       By: dad_humor_enthusiast (via gpt-3.5-turbo)
       Score: 6.4/10
       Toxicity: 0.002
       Safe: True
    2. "Leftover takeout from last night's team meeting that no one wanted to eat"
       By: office_worker (via gpt-3.5-turbo)
       Score: 6.0/10
       Toxicity: 0.005
       Safe: True
    3. "An existential crisis in Tupperware."
       By: dark_humor_specialist (via gpt-4)
       Score: 5.8/10
       Toxicity: 0.001
       Safe: True

👤 Processing user: alex_gamer
  Persona recommendations for alex_gamer:
    dad_humor_enthusiast: 5.0
    millennial_memer: 5.0
    office_worker: 5.0
    gaming_guru: 5.0
    dark_humor_specialist: 5.0
  Generating with personas: ['dark_humor_specialist', 'office_worker', 'gen_z_chaos', 'dad_humor_enthusiast', 'suburban_parent']
  Final personas (with custom): ['dark_humor_specialist', 'office_worker', 'gen_z_chaos']
ERROR: Error with claude-3-sonnet: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
  Context: What's my secret gaming strategy? _____
  Recommended personas: ['dark_humor_specialist', 'office_worker', 'gen_z_chaos', 'dad_humor_enthusiast', 'suburban_parent']
    1. "Blaming lag for all my losses and taking credit for all my wins."
       By: office_worker (via gpt-3.5-turbo)
       Score: 6.0/10
       Toxicity: 0.002
       Safe: True
    2. "Eating a whole pizza before every match and blaming any losses on the food coma."
       By: gen_z_chaos (via gpt-3.5-turbo)
       Score: 6.0/10
       Toxicity: 0.003
       Safe: True
    3. "Playing with the lights off to improve my stealth and also to hide my tears of loneliness."
       By: dark_humor_specialist (via gpt-4)
       Score: 6.0/10
       Toxicity: 0.005
       Safe: True

REALISTIC FEEDBACK SIMULATION
--------------------------------------------------

👤 john_lawyer feedback:
  Round 1:
    dark_humor_specialist: 3.3/10
  Updating feedback: john_lawyer -> dark_humor_specialist: 3.2907674907218665/10
  Updated preferences - Liked: [], Disliked: []
    office_worker: 8.8/10
  Updating feedback: john_lawyer -> office_worker: 8.761600461141397/10
  Updated preferences - Liked: [], Disliked: []
    corporate_ladder_climber: 4.9/10
  Updating feedback: john_lawyer -> corporate_ladder_climber: 4.884341631716414/10
  Updated preferences - Liked: [], Disliked: []
  Round 2:
    dark_humor_specialist: 3.3/10
  Updating feedback: john_lawyer -> dark_humor_specialist: 3.2540266985757875/10
  Updated preferences - Liked: [], Disliked: ['dark_humor_specialist']
    office_worker: 9.0/10
  Updating feedback: john_lawyer -> office_worker: 8.967459834762904/10
  Updated preferences - Liked: ['office_worker'], Disliked: ['dark_humor_specialist']
    corporate_ladder_climber: 4.6/10
  Updating feedback: john_lawyer -> corporate_ladder_climber: 4.620373168642849/10
  Updated preferences - Liked: ['office_worker'], Disliked: ['dark_humor_specialist']
  Round 3:
    dark_humor_specialist: 3.2/10
  Updating feedback: john_lawyer -> dark_humor_specialist: 3.2442543675669993/10
  Updated preferences - Liked: ['office_worker'], Disliked: ['dark_humor_specialist']
    office_worker: 8.2/10
  Updating feedback: john_lawyer -> office_worker: 8.158209198200895/10
  Updated preferences - Liked: ['office_worker'], Disliked: ['dark_humor_specialist']
    corporate_ladder_climber: 5.3/10
  Updating feedback: john_lawyer -> corporate_ladder_climber: 5.32212937051054/10
  Updated preferences - Liked: ['office_worker'], Disliked: ['dark_humor_specialist']
  • Feedback pattern established for john_lawyer

👤 mary_parent feedback:
  Round 1:
    dad_humor_enthusiast: 8.7/10
  Updating feedback: mary_parent -> dad_humor_enthusiast: 8.69192814423168/10
  Updated preferences - Liked: [], Disliked: []
    office_worker: 6.8/10
  Updating feedback: mary_parent -> office_worker: 6.845283853977531/10
  Updated preferences - Liked: [], Disliked: []
    dark_humor_specialist: 2.1/10
  Updating feedback: mary_parent -> dark_humor_specialist: 2.138549157247003/10
  Updated preferences - Liked: [], Disliked: []
  Round 2:
    dad_humor_enthusiast: 8.9/10
  Updating feedback: mary_parent -> dad_humor_enthusiast: 8.871846023281472/10
  Updated preferences - Liked: ['dad_humor_enthusiast'], Disliked: []
    office_worker: 7.1/10
  Updating feedback: mary_parent -> office_worker: 7.109114092363813/10
  Updated preferences - Liked: ['dad_humor_enthusiast'], Disliked: []
    dark_humor_specialist: 2.6/10
  Updating feedback: mary_parent -> dark_humor_specialist: 2.551752164870818/10
  Updated preferences - Liked: ['dad_humor_enthusiast'], Disliked: ['dark_humor_specialist']
  Round 3:
    dad_humor_enthusiast: 9.0/10
  Updating feedback: mary_parent -> dad_humor_enthusiast: 9.034623881539314/10
  Updated preferences - Liked: ['dad_humor_enthusiast'], Disliked: ['dark_humor_specialist']
    office_worker: 7.4/10
  Updating feedback: mary_parent -> office_worker: 7.382821627327275/10
  Updated preferences - Liked: ['dad_humor_enthusiast', 'office_worker'], Disliked: ['dark_humor_specialist']
    dark_humor_specialist: 2.6/10
  Updating feedback: mary_parent -> dark_humor_specialist: 2.612136575035125/10
  Updated preferences - Liked: ['dad_humor_enthusiast', 'office_worker'], Disliked: ['dark_humor_specialist']
  • Feedback pattern established for mary_parent

👤 alex_gamer feedback:
  Round 1:
    office_worker: 5.5/10
  Updating feedback: alex_gamer -> office_worker: 5.539297579656539/10
  Updated preferences - Liked: [], Disliked: []
    gen_z_chaos: 7.8/10
  Updating feedback: alex_gamer -> gen_z_chaos: 7.8197856815214815/10
  Updated preferences - Liked: [], Disliked: []
    dark_humor_specialist: 5.2/10
  Updating feedback: alex_gamer -> dark_humor_specialist: 5.168683547927339/10
  Updated preferences - Liked: [], Disliked: []
  Round 2:
    office_worker: 5.8/10
  Updating feedback: alex_gamer -> office_worker: 5.769147614763184/10
  Updated preferences - Liked: [], Disliked: []
    gen_z_chaos: 7.0/10
  Updating feedback: alex_gamer -> gen_z_chaos: 7.038502162086674/10
  Updated preferences - Liked: ['gen_z_chaos'], Disliked: []
    dark_humor_specialist: 4.8/10
  Updating feedback: alex_gamer -> dark_humor_specialist: 4.796843728291178/10
  Updated preferences - Liked: ['gen_z_chaos'], Disliked: []
  Round 3:
    office_worker: 5.6/10
  Updating feedback: alex_gamer -> office_worker: 5.597825727930392/10
  Updated preferences - Liked: ['gen_z_chaos'], Disliked: []
    gen_z_chaos: 7.5/10
  Updating feedback: alex_gamer -> gen_z_chaos: 7.508051645866688/10
  Updated preferences - Liked: ['gen_z_chaos'], Disliked: []
    dark_humor_specialist: 5.3/10
  Updating feedback: alex_gamer -> dark_humor_specialist: 5.345804876773231/10
  Updated preferences - Liked: ['gen_z_chaos'], Disliked: []
  • Feedback pattern established for alex_gamer

FIXED LEARNING & ADAPTATION
--------------------------------------------------

👤 Learning demonstration for john_lawyer:
  Current liked personas: ['office_worker']
  Current disliked personas: ['dark_humor_specialist']
  Generating new humor with learned preferences...
  Persona recommendations for john_lawyer:
    office_worker: 9.9 (LIKED)
    dad_humor_enthusiast: 5.1
    millennial_memer: 5.1
    gaming_guru: 5.1
    wordplay_master: 5.1
  Generating with personas: ['office_worker', 'gen_z_chaos', 'dad_humor_enthusiast', 'suburban_parent', 'millennial_memer']
  Created/retrieved custom persona: Observational Enthusiast John
  Final personas (with custom): ['Observational Enthusiast John', 'office_worker', 'gen_z_chaos']
ERROR: Error with claude-3-sonnet: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
  Recommended personas: ['office_worker', 'gen_z_chaos', 'dad_humor_enthusiast', 'suburban_parent', 'millennial_memer']
  Best result: "Endlessly scrolling through work emails pretending to be busy."
  Selected persona: office_worker
  Score: 6.0/10
  • SUCCESS: System selected a LIKED persona!

👤 Learning demonstration for mary_parent:
  Current liked personas: ['dad_humor_enthusiast', 'office_worker']
  Current disliked personas: ['dark_humor_specialist']
  Generating new humor with learned preferences...
  Persona recommendations for mary_parent:
    dad_humor_enthusiast: 10.3 (LIKED)
    office_worker: 9.4 (LIKED)
    millennial_memer: 5.3
    gaming_guru: 5.3
    wordplay_master: 5.3
  Generating with personas: ['office_worker', 'gen_z_chaos', 'dad_humor_enthusiast', 'suburban_parent', 'millennial_memer']
  Created/retrieved custom persona: Wordplay Enthusiast Mary
  Final personas (with custom): ['Wordplay Enthusiast Mary', 'office_worker', 'dad_humor_enthusiast']
ERROR: Error with claude-3-sonnet: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
  Recommended personas: ['office_worker', 'gen_z_chaos', 'dad_humor_enthusiast', 'suburban_parent', 'millennial_memer']
  Best result: "Tickling the ivories... on the family's remote control."
  Selected persona: Wordplay Enthusiast Mary
  Score: 6.1/10
  • System selected a neutral persona

👤 Learning demonstration for alex_gamer:
  Current liked personas: ['gen_z_chaos']
  Current disliked personas: []
  Generating new humor with learned preferences...
  Persona recommendations for alex_gamer:
    gen_z_chaos: 9.6 (LIKED)
    office_worker: 5.6
    dark_humor_specialist: 5.4
    dad_humor_enthusiast: 5.3
    millennial_memer: 5.3
  Generating with personas: ['dark_humor_specialist', 'office_worker', 'gen_z_chaos', 'dad_humor_enthusiast', 'suburban_parent']
  Created/retrieved custom persona: Clever Enthusiast Alex
  Final personas (with custom): ['Clever Enthusiast Alex', 'gen_z_chaos', 'dark_humor_specialist']
ERROR: Error with claude-3-sonnet: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
  Recommended personas: ['dark_humor_specialist', 'office_worker', 'gen_z_chaos', 'dad_humor_enthusiast', 'suburban_parent']
  Best result: "Binge-watching the existential crisis that is my life, season 1 to now."
  Selected persona: Clever Enthusiast Alex
  Score: 6.1/10
  • System selected a neutral persona

BLACK CARD GENERATION
--------------------------------------------------

📝 Generating black card for topic: work
  Persona recommendations for creative_writer:
    dad_humor_enthusiast: 5.0
    millennial_memer: 5.0
    office_worker: 5.0
    gaming_guru: 5.0
    dark_humor_specialist: 5.0
  Generating with personas: ['corporate_ladder_climber', 'dark_humor_specialist', 'office_worker', 'dad_humor_enthusiast', 'millennial_memer']
  Final personas (with custom): ['corporate_ladder_climber', 'dark_humor_specialist', 'office_worker']
ERROR: Error with claude-3-sonnet: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
  1. "After a long day at work, I like to unwind by fantasizing about ____ instead of actually doing my job."
     By: office_worker
     Score: 5.8/10
     Safe: True
  2. "After six cups of coffee and two team-building exercises, I finally understood the true meaning of _______ at work."
     By: corporate_ladder_climber
     Score: 5.6/10
     Safe: True

📝 Generating black card for topic: relationships
  Persona recommendations for creative_writer:
    dad_humor_enthusiast: 5.0
    millennial_memer: 5.0
    office_worker: 5.0
    gaming_guru: 5.0
    dark_humor_specialist: 5.0
  Generating with personas: ['dark_humor_specialist', 'office_worker', 'dad_humor_enthusiast', 'millennial_memer', 'gaming_guru']
  Final personas (with custom): ['dark_humor_specialist', 'office_worker', 'dad_humor_enthusiast']
ERROR: Error with claude-3-sonnet: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
  1. "After months of couples therapy, we finally discovered the root of our issues: _____."
     By: dark_humor_specialist
     Score: 6.3/10
     Safe: True
  2. "When the new coworker said they were "married to their job," I didn't realize they meant _____."
     By: office_worker
     Score: 5.8/10
     Safe: True

📝 Generating black card for topic: technology
  Persona recommendations for creative_writer:
    dad_humor_enthusiast: 5.0
    millennial_memer: 5.0
    office_worker: 5.0
    gaming_guru: 5.0
    dark_humor_specialist: 5.0
  Generating with personas: ['dark_humor_specialist', 'office_worker', 'dad_humor_enthusiast', 'millennial_memer', 'gaming_guru']
  Final personas (with custom): ['dark_humor_specialist', 'office_worker', 'dad_humor_enthusiast']
ERROR: Error with claude-3-sonnet: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
  1. "In a shocking new development, Silicon Valley has just unveiled a revolutionary AI that specializes in ______."
     By: dark_humor_specialist
     Score: 5.6/10
     Safe: True
  2. "Having trouble with technology? Just remember, a broken computer is a lot like ____, both just need a little 'Ctrl+Alt+____' to fix!"
     By: dad_humor_enthusiast
     Score: 5.4/10
     Safe: True

📝 Generating black card for topic: food
  Persona recommendations for creative_writer:
    dad_humor_enthusiast: 5.0
    millennial_memer: 5.0
    office_worker: 5.0
    gaming_guru: 5.0
    dark_humor_specialist: 5.0
  Generating with personas: ['dark_humor_specialist', 'office_worker', 'dad_humor_enthusiast', 'millennial_memer', 'gaming_guru']
  Final personas (with custom): ['dark_humor_specialist', 'office_worker', 'dad_humor_enthusiast']
ERROR: Error with claude-3-sonnet: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}
  1. "Nothing says 'team-building exercise' like bonding over _____ in the break room."
     By: office_worker
     Score: 5.8/10
     Safe: True
  2. "After Gordon Ramsay's latest meltdown, he renamed his signature dish to ______."
     By: dark_humor_specialist
     Score: 5.7/10
     Safe: True

GROUP CONSENSUS HUMOR
--------------------------------------------------
  Creating group context for office_friends with members: ['john_lawyer', 'mary_parent', 'alex_gamer']
  Group consensus personas: ['office_worker', 'dad_humor_enthusiast']
Group: office_friends
Members: john_lawyer, mary_parent, alex_gamer
Consensus personas: ['office_worker', 'dad_humor_enthusiast']
  Generating with personas: ['office_worker', 'corporate_ladder_climber', 'dad_humor_enthusiast', 'millennial_memer', 'gaming_guru']
  Final personas (with custom): ['office_worker', 'corporate_ladder_climber', 'dad_humor_enthusiast']
ERROR: Error with claude-3-sonnet: Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}}

Group humor options:
  1. "What do you call a group of musical whales? An orca-stra building activity!"
     By: dad_humor_enthusiast
     Score: 6.0/10
     Safe: True
  2. "Throwing the boss under the bus in a friendly game of trust fall."
     By: corporate_ladder_climber
     Score: 6.0/10
     Safe: True
  3. "Surviving another PowerPoint presentation without falling asleep."
     By: office_worker
     Score: 5.9/10
     Safe: True

USER ANALYTICS
--------------------------------------------------

👤 john_lawyer Analytics:
  Total interactions: 9
  Average score: 5.6/10
  Liked personas: ['office_worker']
  Disliked personas: ['dark_humor_specialist']
  Persona performance:
    💔 dark_humor_specialist: 3.3/10 (3 interactions)
    💚 office_worker: 8.6/10 (3 interactions)
    🤍 corporate_ladder_climber: 5.0/10 (3 interactions)

👤 mary_parent Analytics:
  Total interactions: 9
  Average score: 6.1/10
  Liked personas: ['dad_humor_enthusiast', 'office_worker']
  Disliked personas: ['dark_humor_specialist']
  Persona performance:
    💚 dad_humor_enthusiast: 8.8/10 (3 interactions)
    💚 office_worker: 7.1/10 (3 interactions)
    💔 dark_humor_specialist: 2.4/10 (3 interactions)

👤 alex_gamer Analytics:
  Total interactions: 9
  Average score: 6.1/10
  Liked personas: ['gen_z_chaos']
  Disliked personas: []
  Persona performance:
    🤍 office_worker: 5.6/10 (3 interactions)
    💚 gen_z_chaos: 7.6/10 (3 interactions)
    🤍 dark_humor_specialist: 5.1/10 (3 interactions)

🎯 EVALUATION IMPROVEMENTS
--------------------------------------------------
  Response: "A very funny and clever response"
  Overall Score: 6.3/10
  Breakdown: Humor: 6.8, Creativity: 5.6, Appropriateness: 6.8, Relevance: 5.2

  Response: "Short"
  Overall Score: 5.5/10
  Breakdown: Humor: 4.6, Creativity: 5.7, Appropriateness: 7.1, Relevance: 5.1

  Response: "This is a mediocre response that's okay"
  Overall Score: 6.0/10
  Breakdown: Humor: 5.9, Creativity: 5.7, Appropriateness: 6.9, Relevance: 5.2

  Response: "An absolutely hilarious and unexpected twist that surprises everyone"
  Overall Score: 7.2/10
  Breakdown: Humor: 6.9, Creativity: 8.4, Appropriateness: 7.3, Relevance: 4.9

  Response: "Boring standard response"
  Overall Score: 6.2/10
  Breakdown: Humor: 6.3, Creativity: 6.0, Appropriateness: 7.0, Relevance: 4.7


======================================================================
FIXED DEMONSTRATION COMPLETE!
All major issues have been resolved:
  • Content filtering working
  • Persona recommendations working
  • Feedback learning working
  • Evaluation scores meaningful
  • Black card generation working
  • Group consensus working
  • Analytics working
======================================================================
